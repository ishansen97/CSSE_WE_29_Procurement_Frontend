<div class="container p-5 m-1">
  <div class="row text-center">
    <div class="form-group">

    </div>
    <table class="table table-striped" *ngIf="newNotificationCount > 0">
      <thead>
      <tr>
        <th>Notification ID</th>
        <th>Message</th>
        <th></th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let notification of notifications">
        <td *ngIf="validNotification(notification)">{{notification.notificationId}}</td>
        <td *ngIf="validNotification(notification)">{{notification.message.length > 30 ? notification.message.substring(0,30) + '...': notification.message}}</td>
        <td *ngIf="validNotification(notification)"><button type="button" class="btn btn-primary" (click)="showModal(notification)">View Details</button></td>
      </tr>
      </tbody>
    </table>

    <div class="form-control alert alert-info" *ngIf="newNotificationCount == 0">
      <blockquote>
        <small>
          <cite>
            <b>--No New Notifications--</b>
          </cite>
        </small>
      </blockquote>
    </div>
  </div>
</div>

<div class="modal fade" id="showNotification">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-8">
          <h2>Notification</h2>
        </div>

        <div class="col-4">
          <button class="close" data-dismiss="modal">&times;</button>
        </div>



      </div>

      <div class="modal-body">

        <div class="form-group">
          <label>Description</label>
          <textarea class="form-control" name="description" id="description" rows="10" readonly>{{selectedNotification.message}}</textarea>
        </div>

        <div class="form-group">
          <label>Received Date</label>
          <input type="text" name="date" class="form-control" [(ngModel)]="publishedDate" readonly>
        </div>

        <div class="form-group">
          <button type="button" class="btn btn-success" (click)="readNotification()">Back</button>
        </div>

        <fieldset>
          <legend>Order Details</legend>
          <div class="form-group">
            <button type="button" class="btn btn-info" (click)="viewOrderDetails()">View Order Details</button>
          </div>
        </fieldset>
      </div>
    </div>
  </div>

</div>


<div class="modal fade" id="viewOrderDetails">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-8">
          <h2>Order Details</h2>
        </div>

        <div class="col-4">
          <button class="close" data-dismiss="modal">&times;</button>
        </div>



      </div>

      <div class="modal-body">
        <fieldset>
          <div class="form-group">
            <label>Order ID</label>
            <input type="text" class="form-control" [(ngModel)]="selectedNotification.purchaseOrder.ordId" readonly>
          </div>

          <div class="form-group">
            <label>Supplier</label>
            <input type="text" class="form-control" [(ngModel)]="selectedNotification.supplier.supplierName" readonly>
          </div>

          <div class="form-group">
            <label>Order date</label>
            <input type="text" class="form-control" [(ngModel)]="selectedNotification.purchaseOrder.ordDate" readonly>
          </div>

          <div class="form-group">
            <label>Order Status</label>
            <input type="text" class="form-control" [(ngModel)]="selectedNotification.purchaseOrder.ordStatus" readonly>
          </div>

          <div class="form-group">
            <label>Cost (Rs.)</label>
            <input type="text" class="form-control" [(ngModel)]="selectedNotification.purchaseOrder.cost" readonly>
          </div>

          <div class="form-group">
            <legend>Item Details</legend>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th>Quantity</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let item of selectedNotification.purchaseOrder.itemIdList">
                  <td>{{item.itemType}}</td>
                  <td>{{item.itemQuantity}} <span *ngIf="item.itemMetric !== 'None'">{{item.itemMetric}}</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </fieldset>

      </div>
    </div>
  </div>

</div>


